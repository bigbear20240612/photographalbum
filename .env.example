# ========================================
# 摄影作品展示平台 - 环境变量配置模板
# ========================================
#
# 使用说明：
# 1. 复制此文件为 .env
# 2. 填写所有必需的环境变量
# 3. 不要将 .env 文件提交到Git仓库
#
# ========================================

# ========================================
# 数据库配置
# ========================================

# Vercel Postgres (推荐 - 生产环境)
# Vercel 会自动注入以下环境变量，无需手动配置:
# - POSTGRES_URL
# - POSTGRES_PRISMA_URL (连接池，用于 DATABASE_URL)
# - POSTGRES_URL_NON_POOLING (直连，用于迁移)

# 生产环境 - 使用 Vercel 注入的变量
DATABASE_URL="${POSTGRES_PRISMA_URL}"
DIRECT_URL="${POSTGRES_URL_NON_POOLING}"

# 开发环境 - 本地 PostgreSQL (取消注释以使用)
# DATABASE_URL="postgresql://postgres:password@localhost:5432/photographalbum?schema=public"
# DIRECT_URL="postgresql://postgres:password@localhost:5432/photographalbum?schema=public"

# Supabase (备选方案)
# 获取方式：https://supabase.com -> Project Settings -> Database
# DATABASE_URL="postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:5432/postgres?pgbouncer=true"
# DIRECT_URL="postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:5432/postgres"

# ========================================
# NextAuth.js 配置
# ========================================

# NextAuth Secret (必须)
# 生成方式: openssl rand -base64 32 (在终端运行)
# 或访问: https://generate-secret.vercel.app/32
NEXTAUTH_SECRET="your-nextauth-secret-here-replace-with-actual-secret"

# NextAuth URL
# 本地开发
NEXTAUTH_URL="http://localhost:3000"
# 生产环境（替换为你的域名）
# NEXTAUTH_URL="https://your-domain.vercel.app"

# ========================================
# Cloudinary 配置
# ========================================
# 获取方式：https://cloudinary.com/console
# Dashboard -> Account Details

CLOUDINARY_CLOUD_NAME="your-cloud-name"
CLOUDINARY_API_KEY="123456789012345"
CLOUDINARY_API_SECRET="your-api-secret-here"

# 可选：Cloudinary上传预设
CLOUDINARY_UPLOAD_PRESET="photographalbum"

# ========================================
# Pusher 配置（实时通知）
# ========================================
# 获取方式：https://dashboard.pusher.com
# 创建Channels应用后获取

# 服务端配置（私密）
PUSHER_APP_ID="1234567"
PUSHER_KEY="your-pusher-key"
PUSHER_SECRET="your-pusher-secret"
PUSHER_CLUSTER="ap1"

# 客户端配置（公开）
NEXT_PUBLIC_PUSHER_KEY="your-pusher-key"
NEXT_PUBLIC_PUSHER_CLUSTER="ap1"

# ========================================
# 应用配置
# ========================================

# Node环境
NODE_ENV="development"  # development | production | test

# 应用URL
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# API Base URL（如果API在不同域名）
# NEXT_PUBLIC_API_URL="https://api.your-domain.com"

# ========================================
# 文件上传配置
# ========================================

# 最大文件大小（字节）默认20MB
MAX_FILE_SIZE=20971520

# 单次最大上传数量
MAX_FILES_PER_UPLOAD=50

# 支持的文件类型（MIME类型，逗号分隔）
ALLOWED_FILE_TYPES="image/jpeg,image/jpg,image/png"

# ========================================
# 邮件配置（可选，V1.1实现）
# ========================================

# SMTP配置（用于发送验证邮件、通知邮件）
# SMTP_HOST="smtp.gmail.com"
# SMTP_PORT=587
# SMTP_USER="your-email@gmail.com"
# SMTP_PASSWORD="your-app-password"
# SMTP_FROM="noreply@your-domain.com"

# SendGrid (备选方案)
# SENDGRID_API_KEY="your-sendgrid-api-key"

# Resend (备选方案)
# RESEND_API_KEY="your-resend-api-key"

# ========================================
# 安全配置
# ========================================

# CSRF Secret（用于CSRF保护）
# 生成方式: openssl rand -base64 32
CSRF_SECRET="your-csrf-secret-here"

# 密码哈希轮数（bcrypt）
BCRYPT_ROUNDS=10

# JWT过期时间（秒）
JWT_EXPIRATION=2592000  # 30天

# ========================================
# 速率限制配置
# ========================================

# API请求速率限制（每分钟请求数）
RATE_LIMIT_PER_MINUTE=60

# 上传速率限制（每小时上传次数）
UPLOAD_RATE_LIMIT_PER_HOUR=100

# ========================================
# 日志和监控
# ========================================

# 日志级别
LOG_LEVEL="info"  # error | warn | info | debug

# Sentry配置（错误追踪，可选）
# SENTRY_DSN="https://your-sentry-dsn@sentry.io/project-id"
# SENTRY_AUTH_TOKEN="your-sentry-auth-token"
# NEXT_PUBLIC_SENTRY_DSN="https://your-sentry-dsn@sentry.io/project-id"

# Vercel Analytics（可选）
# NEXT_PUBLIC_VERCEL_ANALYTICS_ID="your-analytics-id"

# ========================================
# 缓存配置
# ========================================

# Redis配置（可选，用于缓存和会话存储）
# REDIS_URL="redis://default:password@localhost:6379"
# REDIS_HOST="localhost"
# REDIS_PORT=6379
# REDIS_PASSWORD="your-redis-password"

# ========================================
# CDN和资源配置
# ========================================

# 静态资源CDN域名（可选）
# NEXT_PUBLIC_CDN_URL="https://cdn.your-domain.com"

# 图片CDN域名（Cloudinary自动提供）
# NEXT_PUBLIC_IMAGE_CDN="https://res.cloudinary.com/your-cloud-name"

# ========================================
# 功能开关（Feature Flags）
# ========================================

# 启用用户注册
ENABLE_REGISTRATION=true

# 启用社交登录（V1.1）
# ENABLE_SOCIAL_LOGIN=false

# 启用实时通知
ENABLE_REALTIME_NOTIFICATIONS=true

# 启用邮件验证（V1.1）
# ENABLE_EMAIL_VERIFICATION=false

# 启用图片水印（V1.3）
# ENABLE_WATERMARK=false

# ========================================
# 第三方服务配置（可选，未来扩展）
# ========================================

# Google OAuth (社交登录，V1.1)
# GOOGLE_CLIENT_ID="your-google-client-id"
# GOOGLE_CLIENT_SECRET="your-google-client-secret"

# GitHub OAuth (社交登录，V1.1)
# GITHUB_CLIENT_ID="your-github-client-id"
# GITHUB_CLIENT_SECRET="your-github-client-secret"

# 微信登录 (V1.1)
# WECHAT_APP_ID="your-wechat-app-id"
# WECHAT_APP_SECRET="your-wechat-app-secret"

# 微博登录 (V1.1)
# WEIBO_APP_KEY="your-weibo-app-key"
# WEIBO_APP_SECRET="your-weibo-app-secret"

# ========================================
# 开发工具配置
# ========================================

# Prisma Studio端口
# PRISMA_STUDIO_PORT=5555

# 是否在开发环境显示详细错误
SHOW_DETAILED_ERRORS=true

# 是否启用调试模式
DEBUG=false

# ========================================
# 备注
# ========================================
#
# 重要提示：
# 1. 所有以 NEXT_PUBLIC_ 开头的变量会暴露给浏览器端
# 2. 私密信息（如API密钥、数据库密码）不要使用 NEXT_PUBLIC_ 前缀
# 3. 生产环境务必使用强密码和随机生成的密钥
# 4. 定期轮换敏感凭据
# 5. 不要将 .env 文件提交到代码仓库
# 6. 在Vercel部署时，需要在Dashboard中配置所有环境变量
#
# ========================================
